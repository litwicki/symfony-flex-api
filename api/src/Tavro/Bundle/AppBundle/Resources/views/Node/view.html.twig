{% extends 'TavroAppBundle:Layouts:app.html.twig' %}

{% block header %}
<ol class="breadcrumb">
  <li><a href="{{ path('index') }}"><i class="fa fa-fw fa-home"></i></a></li>
  <li><a href="{{ path('nodes') }}"><i class="fa fa-fw fa-folder-open-o"></i> Content</a></li>
  <li>{% include 'TavroAppBundle:Node:icon.html.twig' %} <a href="/{[node.type]}s">{{ node.type|capitalize }}s</a></li>
  <li>{{ node.title }}</li>
</ol>
{% endblock %}

{% block content -%}

  <div ng-controller="NodeController as nCtrl">
  <section ng-init="initializeData()">

    <ul class="nav nav-tabs" role="tablist">
      {#{% if app.user is not null %}<li class="dropdown">#}
        {#<a href="javascript:;" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-circle-o-notch fa-spin"></i> Actions <i class="fa fa-fw fa-caret-down"></i></a>#}
        {#<ul class="dropdown-menu">#}
          {#<li><a href="javascript:;" ng-click="favorite()"><i class="fa fa-fw fa-heart text-success"></i> Favorite</a></li>#}
        {#</ul>#}
      {#</li>{% endif %}#}
      <li class="pull-right" role="presentation" ng-if="user.is_moderator || user.id == node.user.id">
        <a href="/nodes/{[node.id]}/edit"><i class="fa fa-fw fa-edit"></i> Edit</a>
      </li>
    </ul>

    <div class="tab-content">

      <div role="tabpanel" class="tab-pane node node-view active" id="node">
        {% include 'TavroAppBundle:Node:node.html.twig' %}
      </div>

    </div>

    <div id="node-comments" ng-init="loadComments()">
      {% include 'TavroAppBundle:Comment:list.html.twig' %}
    </div>

  </section>
  </div>

{% endblock %}

{% block sidebar %}
  {% include 'TavroAppBundle:Node:sidebar.html.twig' %}
{% endblock %}

{% block js %}
  <script type="text/javascript">
    tavro.current_node = "{% if node and node.id %}{{ node.id }}{% else %}0{% endif %}";
    tavro.node_type = "{% if node and node.id %}{{ node.type }}{% else %}{% endif %}";
  </script>
{% endblock %}