{% extends 'TavroAppBundle:Layouts:documentation.html.twig' %}
{% set image_page = true %}
{% block body_classes %}doc-page{% endblock %}

{% block content %}

    <div class="page-header">
        <h1>Image API</h1>
        <p class="lead"><i class="fa fa-fw fa-image"></i> Interact with <code>api.tavro.io</code> and manage Images associated to various objects.</p>
    </div>

    <div class="page-header">
        <h3><i class="fa fa-fw fa-database"></i> Image Model</h3>
        <p>The Image model.</p>
    </div>

    <div class="panel panel-default">
        <table class="table table-hover table-striped table-api">
            <thead>
            <tr>
                <th>Field</th>
                <th>Type</th>
                <th>Methods</th>
                <th>Notes</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>id</td>
                <td class="integer">integer</td>
                <td>GET, DELETE</td>
                <td>Unique identifier.</td>
            </tr>
            <tr>
                <td>title</td>
                <td class="string">string</td>
                <td>GET, PUT, PATCH</td>
                <td></td>
            </tr>
            <tr>
                <td>body</td>
                <td class="string">text</td>
                <td>GET, PUT, PATCH</td>
                <td></td>
            </tr>
            <tr>
                <td>url</td>
                <td class="string">string</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>bucket</td>
                <td class="string">string</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>filesize</td>
                <td class="integer">integer</td>
                <td>GET</td>
                <td>Filesize in bytes.</td>
            </tr>
            <tr>
                <td>height</td>
                <td class="integer">integer</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>width</td>
                <td class="integer">integer</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>update_date</td>
                <td class="date">date</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>create_date</td>
                <td class="date">date</td>
                <td>GET</td>
                <td></td>
            </tr>
            <tr>
                <td>status</td>
                <td class="integer">integer</td>
                <td>GET</td>
                <td></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="page-header">
        <h3><i class="fa fa-fw fa-location-arrow"></i> Image Api Routes</h3>
    </div>

    <ul>
        <li><code>{image}</code> must be the integer ID of a Image..</li>
        <li><code>{format}</code> must be <code>XML</code> or <code>JSON</code> (if not provided the default is <code>JSON</code>).</li>
    </ul>

    <hr/>

    <div class="panel panel-default">
        <table class="table table-striped table-hover table-api">
            <tr>
                <th>Path</th>
                <th>Method(s)</th>
                <th>Description</th>
            </tr>
            <tr>
                <td class="code">/api/v1/images.{format}</td>
                <td class="code get">GET</td>
                <td>Get all Images.</td>
            </tr>
            <tr>
                <td class="code">/api/v1/images/{image}.{format}</td>
                <td class="code get">GET</td>
                <td>Get a Image by Id.</td>
            </tr>
            <tr>
                <td class="code">/api/v1/images/{image}.{format}</td>
                <td class="code update">PUT, PATCH</td>
                <td>Update a Image by Id.</td>
            </tr>
            <tr>
                <td class="code">/api/v1/images/{image}.{format}</td>
                <td class="code delete">DELETE</td>
                <td>Delete a Image by Id.</td>
            </tr>
            <tr>
                <td class="code">/api/v1/images.{format}</td>
                <td class="code post">POST</td>
                <td>Create a Image.</td>
            </tr>
        </table>
    </div>

    <div class="page-header">
        <h3><i class="fa fa-fw fa-image"></i> Adding Images</h3>
        <p>Images can be "attached" to several different types of Objects.</p>
    </div>

    <p>All that's necessary is to <code>POST</code> your Image object to the respective Object you'd like to apply it to. From there the Api will do a lookup if the Image exists already or not and reuse the existing image if necessary.</p>

    <div class="panel panel-default">
        <table class="table table-striped table-hover table-api">
            <thead>
                <tr>
                    <th>Path</th>
                    <th>Method(s)</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="code">/api/v1/expenses/{expense}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to an Expense.</td>
                </tr>
                <tr>
                    <td class="code">/api/v1/funding/{funding}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to a FundingRound.</td>
                </tr>
                <tr>
                    <td class="code">/api/v1/nodes/{node}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to a Node.</td>
                </tr>
                <tr>
                    <td class="code">/api/v1/revenues/{revenue}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to a Revenue.</td>
                </tr>
                <tr>
                    <td class="code">/api/v1/products/{product}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to a Product.</td>
                </tr>
                <tr>
                    <td class="code">/api/v1/services/{services}/images.{format}</td>
                    <td class="code post">PUT, POST</td>
                    <td>Add a Image to a Service.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="page-header">
        <h3>Example</h3>
    </div>
    <!-- Nav tabs -->
    <ul class="nav nav-pills" role="tablist">
      <li role="presentation" class="active"><a href="#angular" aria-controls="angular" role="tab" data-toggle="tab">Angular</a></li>
      <li role="presentation"><a href="#php" aria-controls="php" role="tab" data-toggle="tab">PHP</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content" style="margin-top: 2em;">
      <div role="tabpanel" class="tab-pane active" id="angular">
<pre><code class="javascript">var auth = Base64.encode({API_KEY} + ':' + {API_PASSWORD});
$http.defaults.headers.common['Authorization'] = 'Basic ' + auth;

var url = 'https://{{ api_hostname }}/api/v1/nodes/' + {node} + '/images';

var image = {
    title: 'seed',
    body: 'content that is specific to our angel round'
};

$http.post(url, image)
.success(function(data) {
  alert('Node has been imageged!');
});</code></pre>
      </div>
      <div role="tabpanel" class="tab-pane" id="php">
<pre><code class="php">$url = 'https://{{ api_hostname }}/api/v1/nodes/{node}/images';

$curl = new Curl();
$curl->setBasicAuthentication('{API_KEY}', '{API_PASSWORD}');
$curl->post($url, array(
    'title' => 'seed',
    'body' => 'content that is specific to our angel round'
));

if ($curl->error) {
    echo 'Error: ' . $curl->errorCode . ': ' . $curl->errorMessage;
}
else {
    echo $curl->response;
}</code></pre>
      </div>
    </div>

{% endblock %}