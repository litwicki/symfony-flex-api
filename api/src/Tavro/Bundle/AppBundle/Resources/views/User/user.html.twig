{% extends 'TavroAppBundle:Layouts:app.html.twig' %}

{% block header %}
<div class="page-header">
  <h1>Public Profile</h1>
</div>
{% endblock %}

{% block content -%}

  <div ng-controller="UserController as uCtrl">
    <section ng-init="loadUser()">

      <div class="row">
        <div class="col-lg-4">

          <div class="text-center form-group">
            <i ng-if="!profile_user.avatar" class="fa fa-5x fa-user-plus" style="font-size: 160px;"></i>
            <img class="img-responsive img-thumbnail" ng-if="profile_user.avatar" src="/media/cache/resolve/avatar_large/{[profile_user.avatar.aws_key]}" />
          </div>

          <div ng-if="user.id == profile_user.id" class="small alert alert-warning">
            <i class="fa fa-fw fa-user"></i> <strong>This is your public profile!</strong><br />
            <i class="fa fa-fw fa-link"></i> Go to <a href="{{ path('user_profile') }}">private profile</a>.
          </div>

          <ul class="list-group small">
            <li class="list-group-item"><i class="fa fa-fw fa-user"></i> {[profile_user.username]}</li>
            <li class="list-group-item"><i class="fa fa-fw fa-calendar-o"></i> Joined <span class="text-primary">{[ profile_user.create_date | timeago ]}</span></li>
            <li class="list-group-item"><i class="fa fa-fw fa-refresh"></i> Last Updated <span class="text-primary">{[ profile_user.update_date | date:'short' ]}</span></li>
            <li class="list-group-item"><i class="fa fa-fw fa-calendar"></i> Last Online <span class="text-primary">{[profile_user.last_online_date | timeago ]}</span></li>
          </ul>

        </div>

        <div class="col-lg-8">

          <p class="lead">{[profile_user.username]}</p>
          <p class="text-muted">Mods, contributing, and content authored.</p>

          <div class="form-group">
            <h4 class="page-header"><i class="fa fa-fw fa-cubes"></i> Mods</h4>
            <div class="content-wrapper" ng-if="profile_user.mods.length">
              {% include 'TavroAppBundle:User:mods.html.twig' %}
            </div>
          </div>

          <p class="alert alert-info" ng-if="!profile_user.mods.length"><i class="fa fa-fw fa-exclamation-circle"></i> {[profile_user.username]} has no UI mods.</p>

          <div class="form-group">
            <h4 class="page-header"><i class="fa fa-fw fa-cubes"></i> Contributing Mods</h4>
            <div class="content-wrapper" ng-if="profile_user.contributor_mods.length">
              {% include 'TavroAppBundle:User:contributing.html.twig' %}
            </div>
          </div>

          <p class="alert alert-info" ng-if="!profile_user.contributor_mods.length"><i class="fa fa-fw fa-exclamation-circle"></i> {[profile_user.username]} is not contributing to any UI Mods.</p>

          <div class="form-group">
            <h4 class="page-header"><i class="fa fa-fw fa-book"></i> Content</h4>
            <div class="content-wrapper" ng-if="profile_user.nodes.length">
              {% include 'TavroAppBundle:User:nodes.html.twig' %}
            </div>
          </div>

          <p class="alert alert-info" ng-if="!profile_user.nodes.length"><i class="fa fa-fw fa-exclamation-circle"></i> {[profile_user.username]} has not authored any content.</p>

        </div>

      </div>

    </section>
  </div>

{% endblock %}

{% block js %}
<script>
  tavro.user = {% if user.id %}{{ user.id }}{% else %}0{% endif %};
</script>
{% endblock %}