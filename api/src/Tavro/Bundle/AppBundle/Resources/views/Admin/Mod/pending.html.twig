{% extends 'TavroAppBundle:Layouts:admin.html.twig' %}

{% block admin -%}

  <div ng-controller="AdminController as adminCtrl">
    <section ng-init="loadPendingMods()">

      <div ng-show="modsLoading" class="text-primary" style="line-height: 180px;">
        <h1 class="text-center"><i class="fa fa-fw fa-refresh fa-spin fa-5x"></i><br />Mods loading...</h1>
      </div>

      <div id="admin-mods" ng-if="!modsLoading">
        <div class="filters row">

          <div class="col-lg-6">
            <label for="search-text-field">Filter results by title or text..</label>
            <div class="input-group">
              <span class="input-group-addon" id="search-text"><i class="fa fa-fw fa-search"></i></span>
              <input id="search-text-field" type="text" class="form-control" placeholder="" aria-describedby="search-text" ng-model="search.$">
            </div>
          </div>

        </div>

        <hr />

        <p ng-if="!pending_mods.length" class="lead text-success"><i class="fa fa-fw fa-exclamation-circle"></i>There are no Mods pending moderator approval!</p>

        <p ng-if="pending_mods.length" class="lead text-info"><i class="fa fa-fw fa-cube"></i> <strong>{[pending_mods.length]}</strong> Mod<span ng-if="pending_mods.length != 1">s</span> pending moderator approval:</p>

        <table class="table table-hover table-striped table-responsive" ng-if="pending_mods.length">
          <thead>
            <tr>
              <th>Name</th>
              <th>Creator</th>
              <th class="visible-lg">Submitted</th>
              <th style="width: 20px;"></th>
              <th style="width: 20px;"></th>
            </tr>
          </thead>
          <tbody>
            <tr dir-paginate="mod in pending_mods | filter:search | itemsPerPage: 25" id="pending-mod-{[mod.id]}">
              <td><a target="_blank" href="/mods/{[mod.slug]}"><i class="float-left fa fa-fw fa-external-link"></i> {[mod.title]}</a></td>
              <td><a target="_blank" href="/users/{[mod.user.id]}"><i class="float-left fa fa-fw fa-user"></i> {[mod.user.username]}</a></td>
              <td class="visible-lg">{[mod.create_date|timeago]}</td>
              <td>
                <form id="approve-mod-form" novalidate ng-submit="adminCtrl.approveMod(mod)">
                  <button type="submit" name="submit" class="btn btn-xs btn-success" ng-click="submit()" onclick="return confirm('Are you sure?');"><i class="fa fa-fw fa-check"></i></button>
                </form>
              </td>
              <td>
                <form id="decline-mod-form" novalidate ng-submit="adminCtrl.declineMod(mod)">
                  <button type="submit" name="submit" class="btn btn-xs btn-danger" ng-click="submit()" onclick="return confirm('Are you sure?');"><i class="fa fa-fw fa-close"></i></button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="text-center">
          <dir-pagination-controls boundary-links="true" max-size="10"></dir-pagination-controls>
        </div>
      </div>

    </section>
  </div>

{% endblock %}